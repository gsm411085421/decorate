<section class="content-header">
  <h1>
    {$header}
    <small>{$desc}</small>
  </h1>
</section>
<section class="content">

<div class="box">
    <div class="box-header">
      <div class="box-header with-border">
            <a href="{:url('DesignerProduceImg/addImg',['produce_id'=>$produce_id])}"><button class="btn btn-primary"  type="button">添加图片</button></a>
            <a href="javascript:history.back(-1);"><button  type="button" class="btn btn-default pull-right" data-dismiss="modal">返回</button></a>
      </div>
    </div>
    <div class="box-body">
      <table class="table table-border table-hover">
        <thead>
          <th>序号</th>
          <th>图片</th>
          <th>操作</th>
        </thead>
        <tbody>
          {volist name='list' id='v'}
          <tr>
             <td>{$i}</td>
             <td><img src="{$v.img_url}" style="width: 66px; height: 60px;"></td>
             <td>
                <a href="{:url('DesignerProduceImg/editImg',['id'=>$v['id']])}">
                    <button type="button" class="btn btn-primary" onclick="">
                    <i class="fa fa-edit"></i>
                    </button>
                </a>
                <button type="button" class="btn btn-danger" onclick="handle.delete(this,{$v.id});">
                <i class="fa fa-trash"></i>
                </button>
             </td>
          </tr>
          {/volist}
        </tbody>
      </table>
    </div>
     <div class="box-footer">
          
    </div>
</div>

</section>

<script type="text/javascript">
    
    var requestUrl = {
      delete : "{:url('DesignerProduceImg/deleteImg')}",
    }

    var handle = {

       delete : function(obj,id){
        bayMax.deleteConfirm(function(e){
          $.post(requestUrl.delete,{id:id},function(e){
            if(e==1){
              $(obj).parents('tr').remove();
            }
          })
        });
      },

    }

</script>